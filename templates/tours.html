{% extends "layout.html" %}

{% block content %}
<div class="page-header"
    style="background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url('{{ url_for('static', filename='images/header_tours.png') }}') no-repeat center center/cover;">
    <div>
        <h1>Our Packages</h1>
        <div class="breadcrumb">
            <a href="{{ url_for('home') }}">Home</a> <span>/</span> Packages
        </div>
    </div>
</div>

<section class="tours-section">
    <div style="display: grid; grid-template-columns: 250px 1fr; gap: 3rem;">
        <!-- Sidebar Filters -->
        <aside class="tour-sidebar">
            <div class="filter-box"
                style="background: white; padding: 1.5rem; border-radius: var(--radius-md); box-shadow: var(--shadow-card);">
                <h4 style="margin-bottom: 1.5rem; padding-bottom: 0.5rem; border-bottom: 2px solid #eee;">Categories
                </h4>
                <div class="filter-group">
                    <button class="filter-btn active" data-filter="all"
                        style="display: block; width: 100%; text-align: left; margin: 5px 0; border: none; background: none; padding: 10px; border-radius: 5px;">All
                        Packages</button>
                    <button class="filter-btn" data-filter="honeymoon"
                        style="display: block; width: 100%; text-align: left; margin: 5px 0; border: none; background: none; padding: 10px; border-radius: 5px;">Honeymoon</button>
                    <button class="filter-btn" data-filter="family"
                        style="display: block; width: 100%; text-align: left; margin: 5px 0; border: none; background: none; padding: 10px; border-radius: 5px;">Family
                        Tours</button>
                    <button class="filter-btn" data-filter="international"
                        style="display: block; width: 100%; text-align: left; margin: 5px 0; border: none; background: none; padding: 10px; border-radius: 5px;">International</button>
                    <button class="filter-btn" data-filter="domestic"
                        style="display: block; width: 100%; text-align: left; margin: 5px 0; border: none; background: none; padding: 10px; border-radius: 5px;">Domestic</button>
                </div>
            </div>
        </aside>

        <!-- Tours Grid -->
        <div class="card-container" style="grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));">
            {% for category in categories %}
            <div class="card" data-category="{{ category.category_id }}">
                <div class="card-image">
                    <span class="category-tag"
                        style="position: absolute; top: 15px; right: 15px; background: var(--primary); color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.8rem; font-weight: 600;">Best
                        Seller</span>
                    <img src="{{ url_for('static', filename='images/' + category.image) }}" alt="{{ category.name }}">
                </div>
                <div class="card-body">
                    <h3>{{ category.name }}</h3>
                    <p style="margin-bottom: 1rem;"><i class="far fa-clock"></i> 5 Days / 4 Nights</p>
                    <p>Explore our exclusive {{ category.name.lower() }} packages designed just for you.</p>
                </div>
                <div class="card-footer">
                    <span style="font-size: 1.2rem; font-weight: 700; color: var(--primary);">â‚¹15,000<span
                            style="font-size: 0.9rem; color: #777; font-weight: 400;">/person</span></span>
                    <a href="{{ url_for('enquiry', tour_type=category.category_id) }}" class="btn"
                        style="padding: 8px 20px; font-size: 0.85rem;">View Details</a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const filterBtns = document.querySelectorAll('.filter-btn');
        const cards = document.querySelectorAll('.card');

        filterBtns.forEach(btn => {
            btn.addEventListener('click', () => {
                // Remove active class from all buttons
                filterBtns.forEach(b => b.classList.remove('active'));
                // Add active class to clicked button
                btn.classList.add('active');

                const filterValue = btn.getAttribute('data-filter');

                cards.forEach(card => {
                    if (filterValue === 'all' || card.getAttribute('data-category') === filterValue) {
                        card.style.display = 'flex';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        });
    });
</script>
{% endblock %}